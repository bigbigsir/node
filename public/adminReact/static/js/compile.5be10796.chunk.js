(this.webpackJsonpreact_admin=this.webpackJsonpreact_admin||[]).push([[1],{2285:function(e,t){},2287:function(e,t){},2288:function(e,t){},2289:function(e,t){},2290:function(e,t){},2291:function(e,t){},2292:function(e,t){},2293:function(e,t){},2294:function(e,t){},2295:function(e,t){},2296:function(e,t){},2297:function(e,t){},2298:function(e,t){},2299:function(e,t){},2339:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return r}));var o=n(51),c=function(e,t){return o.a.post("/project/getProjectList",e,t)},r=function(e,t){return o.a.post("/project/removeProject",e,t)};t.a={addProject:function(e,t){return o.a.post("/project/addProject",e,t)},getProjects:function(e,t){return o.a.post("/project/getProjects",e,t)},updateProject:function(e,t){return o.a.post("/project/updateProject",e,t)},removeProject:r,getProjectList:c}},2353:function(e,t,n){e.exports={menu:"compile_menu__2ywfI",menu__header:"compile_menu__header__7qitU","menu__tree-select":"compile_menu__tree-select__QFRCn",log:"compile_log__20Hpu",log__content:"compile_log__content__17vNb",log__alert:"compile_log__alert__3g_n_"}},2358:function(e,t,n){"use strict";n.r(t);var o=n(280),c=n(0),r=n.n(c),a=n(2279),s=n.n(a),u=n(277),i=n(2301),l=n(218),f=n(41),_=n(2311),m=n(2320),d=n(2334),p=n(2339),g=n(51),j=n(2284),b=n.n(j),v=n(2286),E=n.n(v),O=n(2353),h=n.n(O),k=n(2303),P=n(69),N=s.a.bind(h.a);t.default=function(){Object(k.a)();var e=Object(c.useRef)(null),t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],j=Object(c.useState)(!1),v=Object(o.a)(j,2),O=v[0],h=v[1],y=Object(c.useState)(),S=Object(o.a)(y,2),w=S[0],H=S[1],C=Object(c.useState)([]),L=Object(o.a)(C,2),J=L[0],x=L[1],R=Object(c.useState)(),q=Object(o.a)(R,2),A=q[0],F=q[1],G=Object(P.c)((function(e){return e.token}));function I(){var e="".concat("","/socket/webHooks"),t=b()(e,{autoConnect:!1,reconnection:!1,transportOptions:{polling:{extraHeaders:{token:G}}}});t.connect(),t.on("connect",(function(){t.connected&&function(e){var t=J.filter((function(e){return e.id===w}))[0],n={headers:{"socket-id":e,"X-Hub-Signature":"sha1="+E.a.HmacSHA1(JSON.stringify({}),t.secret).toString()}},o={web:"/webHooks/webProject/",node:"/webHooks/nodeProject/"}[t.type.toLowerCase()]+t.key;g.a.post(o,{_isNeedLoginName:!1},n).then((function(e){var t=e.success;h(!1),F(t?"success":"error")}))}(t.id)})),t.on("process_stdout",(function(e){s((function(t){return t+e})),console.log("process_stdout=>",e)})),t.on("process_stderr",(function(e){s((function(t){return t+e})),console.log("process_stderr=>",e)})),t.on("process_error",(function(e){s((function(t){return t+e})),console.log("process_error=>",e)})),t.on("process_close",(function(e){s((function(t){return t+e})),console.log("process_close=>",e)})),t.on("error",(function(e){console.log("error=>",e)})),t.on("connect_error",(function(e){h(!1),u.a.error("Socket connect error"),console.log("connect_error=>",e)})),t.on("disconnect",(function(e){t.disconnect(),console.log("disconnect=>",e)}))}return Object(c.useEffect)((function(){p.a.getProjects().then((function(e){var t=e.success,n=e.data;t&&x(n)}))}),[]),Object(c.useEffect)((function(){var t=e.current;t&&(t.scrollTop=t.scrollHeight)}),[a,O]),r.a.createElement("div",{className:N("menu")},r.a.createElement("div",{className:N("menu__header")},r.a.createElement(i.a,{direction:"vertical"},r.a.createElement("div",null,r.a.createElement("h4",null,"\u9879\u76ee\u5217\u8868"),r.a.createElement(l.default.Group,{onChange:function(e){H(e.target.value)},value:w},J.map((function(e){return r.a.createElement(l.default,{value:e.id,key:e.id},e.name)})))),r.a.createElement(f.a,{loading:O,onClick:function(){w?(s(""),h(!0),I()):u.a.info("\u8bf7\u9009\u62e9\u9879\u76ee")},type:"primary",icon:r.a.createElement(d.a,null)},"\u4e00\u952e\u90e8\u7f72"))),r.a.createElement(i.a,{direction:"vertical",className:N("menu__header")}),r.a.createElement("div",{className:N("menu__header")},r.a.createElement(_.a,{className:N("log"),type:"inner",title:"\u8fdb\u5ea6\u65e5\u5fd7"},r.a.createElement("div",{ref:e,className:N("log__content")},(O||a)&&r.a.createElement(m.a,{className:N("log__alert"),message:"\u5f00\u59cb\u90e8\u7f72",type:"info"}),a,!O&&a&&r.a.createElement(m.a,{className:N("log__alert"),message:"success"===A?"\u6210\u529f\u90e8\u7f72":"\u90e8\u7f72\u5931\u8d25",type:A})))))}}}]);
//# sourceMappingURL=compile.5be10796.chunk.js.map