{"version":3,"sources":["components/icons/CustomIcons.tsx","utils/icons.ts","views/users/index.module.scss","views/menus/index.module.scss","components/icons/icons.module.scss","views/users/api.ts","views/users/CreateForm.tsx","views/users/index.tsx","components/icons/IconsDialog.tsx","views/menus/CreateForm.tsx","views/menus/index.tsx"],"names":["SizeSvg","viewBox","width","height","p-id","fill","d","LanguageSvg","Svg404","Icon404","props","component","SizeIcon","LanguageIcon","antIcons","iconsObj","customIcons","module","exports","getUserList","data","config","http","post","CreateForm","classNames","bind","scss","TreeSelect","TreeNode","intl","useIntl","user","modalVisible","onCancel","onSuccess","useState","roles","setRoles","formatMessage","id","title","setTitle","Form","useForm","form","nameRule","required","onFinish","values","console","log","then","success","api","useEffect","setFieldsValue","role","resetFields","onOk","submit","visible","maskClosable","destroyOnClose","name","labelCol","span","v","Item","noStyle","hidden","type","rules","label","maxLength","placeholder","showSearch","optionFilterProp","filterOption","input","option","children","indexOf","map","item","Option","key","value","cx","Index","setUser","setModalVisible","total","current","pageSize","pagination","setPagination","userList","setUserList","loading","setLoading","columns","dataIndex","render","text","moment","format","record","onClick","updateUser","href","onConfirm","removeMenu","params","page","rows","className","align","icon","PlusOutlined","rowKey","showTotal","onChange","defaultExpandAllRows","dataSource","IconsDialog","selectedIcon","iconList","push","footer","index","menu","menus","setIcon","setVisible","SelectedIcon","initialValues","sort","parent","undefined","updateMenu","addMenu","allowClear","treeIcon","dropdownStyle","maxHeight","overflow","renderTreeNode","disabled","Icon","min","max","shape","style","marginLeft","setMenu","setMenus","createFormProps","getMenus","marginRight","editMenu","noChildrenMenus","useMemo","removeChildren","length"],"mappings":"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","file":"static/js/menu.55695e36.chunk.js","sourcesContent":["import React from 'react'\nimport Icon from '@ant-design/icons'\n\nconst SizeSvg = () => (\n  <svg viewBox=\"0 0 1024 1024\" width=\"1em\" height=\"1em\" p-id=\"2079\" fill=\"currentColor\">\n    <path\n      d=\"M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8z\"\n      p-id=\"18078\"/>\n    <path\n      d=\"M656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z\"\n      p-id=\"18079\"/>\n  </svg>\n)\n\nconst LanguageSvg = () => (\n  <svg viewBox=\"0 0 1024 1024\" width=\"1em\" height=\"1em\" p-id=\"2079\" fill=\"currentColor\">\n    <path\n      d=\"M708.336644 912.339898c-16.750499 9.184173-32.459273 19.464307-50.288337 27.570939-61.682851 26.50977-107.657952 35.154661-175.272909 35.154661-54.601572 0-122.755812-22.160719-171.426301-46.514383-7.045463-3.234671-32.459273-18.926048-37.347606-18.926048-5.3918 0-9.705036 4.331655-9.705036 10.280134 0 3.792373 1.078565 5.949502 4.313236 8.644891 45.435819 32.998555 149.823284 67.074651 207.157083 67.074651l45.435819 0c15.671934 0 33.537837-3.25309 49.209772-6.487761 51.402717-8.66331 105.465007-30.284747 149.284001-58.412364l21.639856 35.693944 29.187763-86.539982-85.444021-7.027044L708.336644 912.339898z\"\n      p-id=\"19192\"/>\n    <path d=\"M675.877371 516.41352 751.07605 539.130917 716.999954 416.357709Z\" p-id=\"19193\"></path>\n    <path\n      d=\"M196.681498 696.520527c17.829064-11.358699 47.053666-48.131207 56.794517-59.490929 28.110221-32.998555 52.984748-68.153216 72.467475-97.898681 3.773953 1.617847 34.616402 27.049053 42.739407 32.459273 8.088212 5.3918 40.008202 23.25668 47.053666 26.492374 7.009647 2.713808 33.537837 15.151072 34.616402 11.358699 1.078565-4.331655-4.888334-29.206182-8.124028-30.284747-3.234671-1.078565-67.613934-28.127617-76.816526-32.459273-7.54893-3.773953-25.953092-11.358699-34.616402-15.133675 24.335245-37.869492 39.504736-66.536392 41.661865-70.867024 3.773953-8.105608 29.727045-58.951647 30.302143-61.647035 0.539282-3.25309 1.078565-15.151072 0.539282-17.86488-0.539282-2.696412-9.741875 2.713808-22.717398 7.045463-13.012362 4.313236-37.347606 20.542872-47.053666 22.179139-9.202593 2.157129-39.504736 13.515828-55.17667 18.926048-15.708773 5.41022-44.896536 14.055111-56.794517 17.308201-11.897981 3.234671-22.717398 3.773953-29.223578 5.949502 0.539282 9.184173 2.732228 12.437264 2.732228 12.437264 1.617847 2.713808 8.088212 9.741875 15.133675 11.358699 7.584746 2.157129 20.022009 1.617847 25.413809 0 5.966898-1.078565 15.672958-5.949502 16.750499-8.105608 1.11438-2.174526-0.539282-8.66331 1.653663-10.819416 2.157129-1.635243 31.884175-8.66331 42.703591-11.897981 11.358699-3.792373 54.099129-18.404162 59.526745-17.847483-1.653663 6.487761-35.730783 74.642001-47.089481 95.184873-10.819416 20.561291-75.162864 110.335944-88.678692 126.026298-10.819416 12.437264-35.693944 43.261293-44.357254 49.767474C178.277336 699.773617 193.950294 698.138374 196.681498 696.520527z\"\n      p-id=\"19194\"/>\n    <path\n      d=\"M277.812283 388.769374c10.819416 0 24.335245-3.25309 32.459273-6.487761 8.088212-3.25309 21.60404-10.280134 27.031657-20.561291 1.078565-2.157129 3.773953-5.949502 2.157129-15.151072-1.617847-7.027044-5.931083-9.184173-11.358699-9.184173-5.3918 0.539282-21.639856 4.870938-29.762861 7.566326-7.54893 2.174526-24.335245 7.027044-31.344892 8.66331-7.045463 1.617847-22.717398-0.539282-24.874527-2.713808-2.192945-2.157129 2.696412 16.768919 9.165754 23.795962C263.182075 386.593825 272.922926 388.230092 277.812283 388.769374z\"\n      p-id=\"19195\"/>\n    <path\n      d=\"M847.87877 263.820618 847.87877 37.738509c0-7.027044-4.852518-11.358699-10.819416-11.358699-4.852518 0-341.270571 116.285446-345.081363 117.364011L190.175317 36.659945l0 207.695343c-45.975101 15.690354-78.973656 26.492374-80.59048 27.031657-3.234671 1.095961-7.584746 2.174526-10.819416 5.949502-1.078565 1.095961-1.617847 3.792373-2.157129 5.41022l0 583.061452c0 0.556679 0.539282 1.095961 0.539282 1.635243 1.617847 4.331655 5.427616 7.027044 9.740852 7.027044 5.3918 0 393.21257-130.897236 401.87588-134.671189 0 0 0.539282 0 418.626379 133.054365L927.390685 289.252847 847.87877 263.820618zM493.056556 730.921012 107.410312 859.850429 107.410312 286.902312 493.056556 157.418262 493.056556 730.921012zM507.649925 150.733003l330.304821-112.99347 0 219.055065L507.649925 150.733003zM788.927123 677.594479l-20.022009-73.024154L654.776797 569.415664l-24.335245 59.490929-55.17667-16.750499 116.860545-289.922089 54.06229 16.768919 97.9171 355.361497L788.927123 677.594479z\"\n      p-id=\"19196\"/>\n  </svg>\n)\n\nconst Svg404 = () => (\n  <svg viewBox=\"0 0 1024 1024\" width=\"1em\" height=\"1em\" p-id=\"2064\" fill=\"currentColor\">\n    <path\n      d=\"M973.557996 586.14612v79.591925c31.643248-60.647559 49.572023-128.348277 49.572022-199.87945C1023.130018 208.754206 794.070328 0.206249 511.664135 0.206249 229.26594 0.206249 0.206249 208.754206 0.206249 465.858595c0 3.222701 0.22391 6.445403 0.22391 9.6761l183.685976-207.540363h106.67701l-158.016321 217.408387h51.339311V430.192968l109.779759-155.753233v394.728927H184.116135V586.14612H17.463295c47.588822 162.206632 188.78792 289.547315 367.835765 331.058586-11.515359 26.389365-44.925895 90.067703-100.479508 101.351156-68.828263 14.106315 186.788726 3.422621 369.155233-105.381532 140.095543-36.87314 255.401075-126.740924 318.031836-244.005668h-108.004475V586.14612H680.09226V475.726618l183.909886-207.732286h104.02208l-155.369388 217.408387h51.347308v-59.440047l109.771763-155.153474v315.336922h-0.215913z m-625.667861 22.566905a84.094111 84.094111 0 0 1-7.96479-36.265385V356.446687c0-12.898802 2.65493-24.981932 7.96479-36.265385a93.242424 93.242424 0 0 1 21.695257-29.428141c9.068346-8.252674 19.911976-14.905993 32.306981-19.736047 12.395005-4.83805 25.669655-7.261074 39.839944-7.261074h90.29961c14.154296 0 27.436943 2.423024 39.831948 7.261074 12.171095 4.830054 22.790815 11.275456 31.875155 19.336208l-98.040491 130.371461v-23.174661a15.673684 15.673684 0 0 0-5.317857-12.091127c-3.542572-3.222701-7.96479-4.830054-13.27465-4.830053-5.317857 0-9.740075 1.607352-13.282647 4.830053a15.673684 15.673684 0 0 0-5.30986 12.091127v72.538768L354.97528 620.804153a84.413982 84.413982 0 0 1-7.085145-12.091128z m285.724855-36.265385c0 12.898802-2.65493 24.981932-7.972787 36.265385a93.242424 93.242424 0 0 1-21.68726 29.428141c-9.068346 8.252674-19.911976 14.905993-32.306981 19.744043-12.395005 4.830054-25.669655 7.253077-39.839944 7.253077H441.508408c-14.154296 0-27.436943-2.423024-39.831948-7.253077-12.395005-4.83805-23.238635-11.491369-32.314978-19.75204a99.879749 99.879749 0 0 1-11.06754-12.091127l109.771763-145.677293v50.979455c0 4.83805 1.775285 8.868426 5.317857 12.091128 3.534576 3.222701 7.96479 4.830054 13.274651 4.830053 5.30986 0 9.740075-1.607352 13.27465-4.830053a15.673684 15.673684 0 0 0 5.317857-12.091128V430.992645L607.721425 294.791533c7.301058 7.452996 13.27465 15.913587 17.704865 25.389769 5.30986 11.275456 7.96479 23.366583 7.96479 36.265385v216.000953h0.22391z\"\n      p-id=\"2191\"/>\n  </svg>\n)\n\nexport const Icon404: React.FC = props => <Icon component={Svg404} {...props} />\nexport const SizeIcon: React.FC = props => <Icon component={SizeSvg} {...props} />\nexport const LanguageIcon: React.FC = props => <Icon component={LanguageSvg} {...props} />\n","import * as iconsObj from '@ant-design/icons/lib/icons'\nimport * as customIcons from '@/components/icons/CustomIcons'\n\nconst antIcons: { [key: string]: any } = {\n  ...iconsObj,\n  ...customIcons\n}\n\nexport default antIcons\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"users_page__3yKWT\",\"page__header\":\"users_page__header__gEeA6\",\"users__tree-select\":\"users_users__tree-select__2nmjc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"menus_page__2WuPH\",\"page__header\":\"menus_page__header__23sH9\",\"menus__tree-select\":\"menus_menus__tree-select__821iN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icons__item\":\"icons_icons__item__1XNLj\",\"icons\":\"icons_icons__3Eo_C\"};","import http from '@/api/http'\nimport { RequestApiFn } from '@/api/types'\n\n// 获取用户列表\nexport const getUserList: RequestApiFn = (data, config) => {\n  const url: string = '/users/getUserList'\n  return http.post(url, data, config)\n}\n\n// 添加用户\nexport const addUser: RequestApiFn = (data, config) => {\n  const url: string = '/users/addUser'\n  return http.post(url, data, config)\n}\n\n// 更新用户\nexport const updateUser: RequestApiFn = (data, config) => {\n  const url: string = '/users/updateUser'\n  return http.post(url, data, config)\n}\n\n// 删除用户\nexport const removeUser: RequestApiFn = (data, config) => {\n  const url: string = '/users/removeUser'\n  return http.post(url, data, config)\n}\n\n// 获取所有角色\nexport const getAllRole: RequestApiFn = (data, config) => {\n  const url: string = '/role/getAllRole'\n  return http.post(url, data, config)\n}\n","import React, {\n  useState,\n  useEffect\n} from 'react'\nimport * as api from './api'\nimport { useIntl } from 'react-intl'\nimport { Rule } from 'antd/es/form'\nimport antIcons from '@/utils/icons'\nimport classNames from 'classnames/bind'\nimport { MenuItem } from '@/store/types'\nimport IconsDialog from '@/components/icons/IconsDialog'\nimport { Button, Modal, Form, Input, Select, TreeSelect } from 'antd'\nimport scss from './index.module.scss'\nimport { RequestData } from '@/api/types'\n\nconst cx = classNames.bind(scss)\nconst { TreeNode } = TreeSelect\n\ninterface FormValues {\n  id?: string\n  role?: string\n  email?: string\n  username?: string\n}\n\ninterface CreateFormProps {\n  user?: any\n  modalVisible: boolean\n  onCancel: () => void\n  onSuccess: () => void\n}\n\nconst CreateForm: React.FC<CreateFormProps> = (props) => {\n  const intl = useIntl()\n  const { user, modalVisible, onCancel, onSuccess } = props\n  const [roles, setRoles] = useState([])\n  const [title, setTitle] = useState<string>(intl.formatMessage({ id: 'add' }))\n  const [form] = Form.useForm()\n  const nameRule: Rule[] = [\n    {\n      required: true\n    }\n  ]\n  useEffect(() => {\n    api.getAllRole().then(({ success, data }) => {\n      if (success) setRoles(data)\n    })\n  }, [])\n  useEffect(toggleVisible, [modalVisible, user])\n\n  function toggleVisible() {\n    if (user) {\n      form.setFieldsValue({\n        ...user,\n        role: user.role?.id\n      })\n      setTitle(intl.formatMessage({ id: 'update' }))\n    } else {\n      form.resetFields()\n      setTitle(intl.formatMessage({ id: 'add' }))\n    }\n  }\n\n  function onFinish(values: FormValues) {\n    console.log(values)\n    if (values.id) {\n      api.updateUser(values).then(({ success }) => {\n        if (success) {\n          onSuccess()\n          onCancel()\n        }\n      })\n    } else {\n      api.addUser(values).then(({ success }) => {\n        if (success) {\n          onSuccess()\n          onCancel()\n        }\n      })\n    }\n  }\n\n  function filterOption(input: any, option: any) {\n    return !!~option.children.indexOf(input)\n  }\n\n  return (\n    <Modal\n      title={title}\n      onOk={() => form.submit()}\n      visible={modalVisible}\n      onCancel={onCancel}\n      maskClosable={false}\n      destroyOnClose\n    >\n      <Form\n        name=\"menu\"\n        form={form}\n        labelCol={{ span: 4 }}\n        onFinish={v => onFinish(v as FormValues)}\n      >\n        <Form.Item name=\"id\" noStyle>\n          <Input hidden type=\"text\"/>\n        </Form.Item>\n        <Form.Item\n          name=\"username\"\n          rules={nameRule}\n          label=\"用户名\">\n          <Input maxLength={16} placeholder={intl.formatMessage({ id: 'menu.name' })}/>\n        </Form.Item>\n        <Form.Item name=\"email\" label=\"邮箱\" rules={nameRule}>\n          <Input maxLength={16} placeholder={intl.formatMessage({ id: 'menu.path' })}/>\n        </Form.Item>\n        <Form.Item name=\"role\" label=\"角色\" >\n          <Select\n            showSearch\n            placeholder=\"请选择\"\n            optionFilterProp=\"children\"\n            filterOption={filterOption}\n          >\n            {\n              roles.map((item: any) => (\n                <Select.Option key={item.id} value={item.id}>{item.name}</Select.Option>\n              ))\n            }\n          </Select>\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n\nexport default CreateForm\n","import React, { useEffect, useState } from 'react'\nimport classNames from 'classnames/bind'\nimport { Table, Button, Space, Divider, Popconfirm, Pagination } from 'antd'\nimport { ColumnsType } from 'antd/es/table'\nimport { PlusOutlined } from '@ant-design/icons'\nimport * as api from './api'\nimport moment from 'moment'\nimport { useIntl } from 'react-intl'\nimport scss from './index.module.scss'\nimport CreateForm from './CreateForm'\n\nconst cx = classNames.bind(scss)\n\ninterface UserItem {\n  id: string\n  role?: { [key: string]: any }\n  email: string\n  created: string\n  updated: string\n  username: string\n  lastLoginDate: string\n}\n\ninterface Pagination {\n  total: number,\n  current: number,\n  pageSize: number,\n}\n\nconst Index: React.FC = () => {\n  const intl = useIntl()\n  const [user, setUser] = useState<UserItem | null>(null)\n  const [modalVisible, setModalVisible] = useState<boolean>(false)\n  const [pagination, setPagination] = useState<Pagination>({\n    total: 0,\n    current: 1,\n    pageSize: 10\n  })\n  const [userList, setUserList] = useState<UserItem[]>([])\n  const [loading, setLoading] = useState<boolean>(false)\n\n  const columns: ColumnsType<UserItem> = [\n    {\n      title: '用户名',\n      dataIndex: 'username'\n    },\n    {\n      title: '邮箱',\n      dataIndex: 'email'\n    },\n    {\n      title: '角色',\n      dataIndex: 'role',\n      render(text) {\n        return text && text.name\n      }\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'created',\n      render(text) {\n        return moment(text).format('YYYY-MM-DD hh:mm:ss')\n      }\n    },\n    {\n      title: '更新时间',\n      dataIndex: 'updated',\n      render(text) {\n        return moment(text).format('YYYY-MM-DD hh:mm:ss')\n      }\n    },\n    {\n      title: '最后登录时间',\n      dataIndex: 'lastLoginDate',\n      render(text) {\n        return moment(text).format('YYYY-MM-DD hh:mm:ss')\n      }\n    },\n    {\n      title: '操作',\n      key: 'action',\n      width: '20%',\n      render(text, record) {\n        return (\n          <>\n            <a onClick={() => updateUser(record)} href=\"javascript:void (0);\">\n              {intl.formatMessage({ id: 'update' })}\n            </a>\n            <Divider type=\"vertical\"/>\n            <Popconfirm\n              title={intl.formatMessage({ id: 'deleteTips' })}\n              onConfirm={() => removeMenu(record)}\n            >\n              <a href=\"javascript:void (0);\">\n                {intl.formatMessage({ id: 'delete' })}\n              </a>\n            </Popconfirm>\n          </>\n        )\n      }\n    }\n  ]\n\n  useEffect(getUserList, [])\n\n  function updateUser(record: UserItem) {\n    setUser(record)\n    setModalVisible(true)\n  }\n\n  function addUser() {\n    setUser(null)\n    setModalVisible(true)\n  }\n\n  function getUserList(params = {}) {\n    params = {\n      page: pagination.current,\n      pageSize: pagination.pageSize,\n      ...params\n    }\n    setLoading(true)\n    api.getUserList(params).then(({ success, data }) => {\n      if (success) {\n        setPagination({\n          total: data.total,\n          current: data.page,\n          pageSize: data.pageSize\n        })\n        setUserList(data.rows)\n      }\n      setLoading(false)\n    })\n  }\n\n  function onChange(pagination: any) {\n    getUserList({\n      page: pagination.current,\n      pageSize: pagination.pageSize\n    })\n  }\n\n  function removeMenu(record: UserItem): void {\n    api.removeUser({ id: record.id }).then(({ success }) => {\n      success && getUserList()\n    })\n  }\n\n  return (\n    <div className={cx('users', 'page')}>\n      <Space align=\"center\" className={cx('page__header')}>\n        <Button onClick={addUser} type=\"primary\" icon={<PlusOutlined/>}>\n          {intl.formatMessage({ id: 'add' })}\n        </Button>\n      </Space>\n      <Table\n        rowKey='id'\n        loading={loading}\n        pagination={{\n          ...pagination,\n          showTotal: total => `共 ${total} 条`\n        }}\n        onChange={onChange}\n        columns={columns}\n        defaultExpandAllRows\n        dataSource={userList}/>\n      <CreateForm\n        user={user}\n        modalVisible={modalVisible}\n        onSuccess={() => getUserList()}\n        onCancel={() => setModalVisible(false)}/>\n    </div>\n  )\n}\n\nexport default Index\n","import React from 'react'\nimport classNames from 'classnames/bind'\nimport { Modal, Button } from 'antd'\nimport antIcons from '@/utils/icons'\nimport scss from './icons.module.scss'\n\nconst cx = classNames.bind(scss)\n\ninterface IconsProps {\n  modalVisible: boolean\n  onCancel: () => void\n  selectedIcon: (icon: string) => void\n}\n\nconst IconsDialog: React.FC<IconsProps> = (props) => {\n  const { modalVisible, onCancel, selectedIcon } = props\n  const iconList = []\n  for (const key in antIcons) {\n    iconList.push({\n      name: key,\n      icon: antIcons[key]\n    })\n  }\n\n  return (\n    <Modal\n      width=\"50%\"\n      title=\"icons\"\n      destroyOnClose\n      visible={modalVisible}\n      onCancel={onCancel}\n      footer={null}\n      className={cx('icons')}\n    >\n      <div>\n        {\n          iconList.map((item, index) => (\n            <Button onClick={() => selectedIcon(item.name)} className={cx('icons__item')} type=\"text\" key={index}>\n              <item.icon/>\n            </Button>\n          ))\n        }\n      </div>\n    </Modal>\n  )\n}\n\nexport default IconsDialog\n","import React, {\n  useState,\n  useEffect\n} from 'react'\nimport api from '@/api'\nimport { useIntl } from 'react-intl'\nimport { Rule } from 'antd/es/form'\nimport antIcons from '@/utils/icons'\nimport classNames from 'classnames/bind'\nimport { MenuItem } from '@/store/types'\nimport IconsDialog from '@/components/icons/IconsDialog'\nimport { Button, Modal, Form, Input, InputNumber, Col, Row, TreeSelect } from 'antd'\nimport scss from './index.module.scss'\n\nconst cx = classNames.bind(scss)\nconst { TreeNode } = TreeSelect\n\ninterface FormValues {\n  id?: string\n  path?: string\n  icon?: string\n  name: string\n  sort: number\n  parent?: string | null\n}\n\ninterface CreateFormProps {\n  menu?: any\n  menus: MenuItem[]\n  modalVisible: boolean\n  onCancel: () => void\n  onSuccess: () => void\n}\n\nconst CreateForm: React.FC<CreateFormProps> = (props) => {\n  const intl = useIntl()\n  const { menu, menus, modalVisible, onCancel, onSuccess } = props\n  const [icon, setIcon] = useState<string>('')\n  const [title, setTitle] = useState<string>(intl.formatMessage({ id: 'add' }))\n  const [visible, setVisible] = useState<boolean>(false)\n  const [form] = Form.useForm()\n  const SelectedIcon = antIcons[icon]\n  const initialValues: FormValues = {\n    name: '',\n    sort: 1\n  }\n  const nameRule: Rule[] = [\n    {\n      required: true\n    }\n  ]\n  const sortRule: Rule[] = [\n    { required: true },\n    {\n      min: 1,\n      type: 'number'\n    }\n  ]\n\n  useEffect(toggleVisible, [modalVisible, menu])\n\n  function toggleVisible() {\n    if (menu) {\n      menu.parent = menu.parent || undefined\n      setIcon(menu.icon)\n      form.setFieldsValue(menu)\n      setTitle(intl.formatMessage({ id: 'update' }))\n    } else {\n      setIcon('')\n      form.resetFields()\n      setTitle(intl.formatMessage({ id: 'add' }))\n    }\n  }\n\n  function renderTreeNode(item: MenuItem, disabled?: boolean): React.ReactNode {\n    disabled = disabled || menu?.id === item.id\n    const Icon = item.icon && antIcons[item.icon]\n    return (\n      <TreeNode\n        key={item.id}\n        value={item.id}\n        title={item.name}\n        disabled={disabled}\n        icon={item.icon && <Icon/>}\n      >\n        {\n          item.children.map(item => renderTreeNode(item, disabled))\n        }\n      </TreeNode>\n    )\n  }\n\n  function onFinish(values: FormValues) {\n    values.parent = values.parent || null\n    if (values.id) {\n      api.updateMenu(values).then(({ success }) => success && onSuccess())\n    } else {\n      api.addMenu(values).then(({ success }) => success && onSuccess())\n    }\n  }\n\n  function selectedIcon(icon: string) {\n    setIcon(icon)\n    setVisible(false)\n    form.setFieldsValue({ icon })\n  }\n\n  return (\n    <Modal\n      title={title}\n      onOk={() => form.submit()}\n      visible={modalVisible}\n      onCancel={onCancel}\n      maskClosable={false}\n      destroyOnClose\n    >\n      <Form\n        name=\"menu\"\n        form={form}\n        labelCol={{ span: 4 }}\n        initialValues={initialValues}\n        onFinish={v => onFinish(v as FormValues)}\n      >\n        <Form.Item name=\"id\" noStyle>\n          <Input hidden type=\"text\"/>\n        </Form.Item>\n        <Form.Item\n          name=\"name\"\n          rules={nameRule}\n          label={intl.formatMessage({ id: 'menu.name' })}>\n          <Input maxLength={16} placeholder={intl.formatMessage({ id: 'menu.name' })}/>\n        </Form.Item>\n        <Form.Item name=\"path\" label={intl.formatMessage({ id: 'menu.path' })}>\n          <Input maxLength={16} placeholder={intl.formatMessage({ id: 'menu.path' })}/>\n        </Form.Item>\n        <Form.Item name=\"parent\" label={intl.formatMessage({ id: 'menu.parent' })}>\n          <TreeSelect\n            allowClear\n            treeIcon\n            value={initialValues.parent}\n            dropdownStyle={{\n              maxHeight: 400,\n              overflow: 'auto'\n            }}\n            placeholder={intl.formatMessage({ id: 'select' })}\n            className={cx('menus__tree-select')}\n            onChange={v => form.setFieldsValue({ parent: v })}\n          >\n            {menus.map(item => renderTreeNode(item))}\n          </TreeSelect>\n        </Form.Item>\n        <Row>\n          <Col span={12}>\n            <Form.Item\n              name=\"sort\"\n              rules={sortRule}\n              labelCol={{ span: 8 }}\n              label={intl.formatMessage({ id: 'menu.sort' })}\n            >\n              <InputNumber min={1} max={100000}/>\n            </Form.Item>\n          </Col>\n          <Col span={12}>\n            <Form.Item labelCol={{ span: 8 }} label={intl.formatMessage({ id: 'menu.icon' })}>\n              <Form.Item name=\"icon\" noStyle>\n                <Button onClick={() => setVisible(true)} type=\"dashed\" shape=\"circle\">\n                  {icon ? <SelectedIcon/> : <span>&nbsp;</span>}\n                </Button>\n              </Form.Item>\n              {\n                icon &&\n                <a onClick={() => selectedIcon('')} style={{ marginLeft: 10 }} href=\"javascript:void (0);\">\n                  {intl.formatMessage({ id: 'delete' })}\n                </a>\n              }\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n      <IconsDialog selectedIcon={selectedIcon} modalVisible={visible} onCancel={() => setVisible(false)}/>\n    </Modal>\n  )\n}\n\nexport default CreateForm\n","import React, { useEffect, useMemo, useState } from 'react'\nimport classNames from 'classnames/bind'\nimport { Table, Button, Space, Divider, Popconfirm } from 'antd'\nimport { MenuItem } from '@/store/types'\nimport { ColumnsType } from 'antd/es/table'\nimport antIcons from '@/utils/icons'\nimport { PlusOutlined } from '@ant-design/icons'\nimport CreateForm from './CreateForm'\nimport api from '@/api'\nimport scss from './index.module.scss'\nimport { useIntl } from 'react-intl'\n\nconst cx = classNames.bind(scss)\n\ninterface MenuItemNoChildren extends Omit<MenuItem, 'children'> {\n  children?: MenuItemNoChildren[]\n}\n\nconst Index: React.FC = () => {\n  const intl = useIntl()\n  const [menu, setMenu] = useState<MenuItemNoChildren | null>(null)\n  const [menus, setMenus] = useState<MenuItem[]>([])\n  const [loading, setLoading] = useState<boolean>(false)\n  const [visible, setVisible] = useState<boolean>(false)\n  const createFormProps = {\n    menu,\n    menus,\n    modalVisible: visible,\n    onSuccess: getMenus,\n    onCancel: () => setVisible(false)\n  }\n  const columns: ColumnsType<MenuItemNoChildren> = [\n    {\n      title: intl.formatMessage({ id: 'menu.name' }),\n      dataIndex: 'name'\n    },\n    {\n      title: intl.formatMessage({ id: 'menu.path' }),\n      dataIndex: 'path',\n      width: '20%'\n    },\n    {\n      title: intl.formatMessage({ id: 'menu.icon' }),\n      dataIndex: 'icon',\n      width: '20%',\n      render(text) {\n        const Icon = antIcons[text]\n        return (\n          <>\n            {text && <Icon style={{ marginRight: 4 }}/>}\n            <span>{text}</span>\n          </>\n        )\n      }\n    },\n    {\n      title: intl.formatMessage({ id: 'menu.sort' }),\n      dataIndex: 'sort',\n      width: '10%'\n    },\n    {\n      title: intl.formatMessage({ id: 'menu.action' }),\n      key: 'action',\n      width: '20%',\n      render(text, record) {\n        return (\n          <>\n            <a onClick={() => editMenu(record)} href=\"javascript:void (0);\">\n              {intl.formatMessage({ id: 'update' })}\n            </a>\n            <Divider type=\"vertical\"/>\n            <Popconfirm\n              title={intl.formatMessage({ id: 'deleteTips' })}\n              onConfirm={() => removeMenu(record)}\n            >\n              <a href=\"javascript:void (0);\">\n                {intl.formatMessage({ id: 'delete' })}\n              </a>\n            </Popconfirm>\n          </>\n        )\n      }\n    }\n  ]\n  // 删除Children空数组，ant-design的树表格会渲染空Children的展开图标\n  const noChildrenMenus = useMemo<MenuItemNoChildren[]>(() => {\n    return removeChildren(menus)\n\n    function removeChildren(menus: MenuItemNoChildren[]): MenuItemNoChildren[] {\n      return menus.map(({ ...item }) => {\n        if (item.children?.length) {\n          item.children = removeChildren(item.children)\n        } else {\n          delete item.children\n        }\n        return item\n      })\n    }\n  }, [menus])\n\n  useEffect(getMenus, [])\n\n  function getMenus() {\n    setLoading(true)\n    setVisible(false)\n    api.getMenus({ parent: null }).then(({ success, data }) => {\n      success && setMenus(data)\n      setLoading(false)\n    })\n  }\n\n  function addMenu() {\n    setMenu(null)\n    setVisible(true)\n  }\n\n  function editMenu(record: MenuItemNoChildren) {\n    setMenu(record)\n    setVisible(true)\n  }\n\n  function removeMenu(record: MenuItemNoChildren): void {\n    api.removeMenu({ id: record.id }).then(({ success }) => {\n      success && getMenus()\n    })\n  }\n\n  return (\n    <div className={cx('menu', 'page')}>\n      <Space align=\"center\" className={cx('page__header')}>\n        <Button onClick={addMenu} type=\"primary\" icon={<PlusOutlined/>}>\n          {intl.formatMessage({ id: 'add' })}\n        </Button>\n      </Space>\n      <Table\n        rowKey='id'\n        loading={loading}\n        pagination={false}\n        columns={columns}\n        defaultExpandAllRows\n        dataSource={noChildrenMenus}\n      />\n      <CreateForm {...createFormProps}/>\n    </div>\n  )\n}\n\nexport default Index\n"],"sourceRoot":""}