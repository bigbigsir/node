(this.webpackJsonpreact_admin=this.webpackJsonpreact_admin||[]).push([[7],{2339:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return c}));var n=a(51),r=function(e,t){return n.a.post("/project/getProjectList",e,t)},c=function(e,t){return n.a.post("/project/removeProject",e,t)};t.a={addProject:function(e,t){return n.a.post("/project/addProject",e,t)},getProjects:function(e,t){return n.a.post("/project/getProjects",e,t)},updateProject:function(e,t){return n.a.post("/project/updateProject",e,t)},removeProject:c,getProjectList:r}},2347:function(e,t,a){e.exports={page:"projects_page__WyTXV",page__header:"projects_page__header__1MdNG"}},2363:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(280),c=a(0),l=a.n(c),o=a(2279),i=a.n(o),s=a(2333),u=a(2308),d=a(2309),m=a(2301),p=a(41),f=a(2310),b=a(2331),j=a(2339),h=a(2303),g=a(2347),E=a.n(g),O=a(2313),v=a(2278),S=a(2315),x=a(169),I=(i.a.bind(E.a),function(e){var t=Object(h.a)(),a=e.role,n=e.modalVisible,o=e.onCancel,i=e.onSuccess,s=Object(c.useState)(t.formatMessage({id:"add"})),u=Object(r.a)(s,2),d=u[0],m=u[1],p=O.a.useForm(),f=Object(r.a)(p,1)[0],b=[{required:!0}];function g(e){e.id?function(e){j.a.updateProject(e).then((function(e){e.success&&(o(),i())}))}(e):function(e){j.a.addProject(e).then((function(e){e.success&&(o(),i())}))}(e),console.log(e)}return Object(c.useEffect)((function(){a?(f.setFieldsValue(a),m(t.formatMessage({id:"update"}))):(f.resetFields(),m(t.formatMessage({id:"add"})))}),[n,a]),l.a.createElement(v.a,{title:d,onOk:function(){return f.submit()},visible:n,onCancel:o,maskClosable:!1},l.a.createElement(O.a,{name:"menu",form:f,labelCol:{span:4},onFinish:function(e){return g(e)}},l.a.createElement(O.a.Item,{name:"id",noStyle:!0},l.a.createElement(S.a,{hidden:!0,type:"text"})),l.a.createElement(O.a.Item,{name:"type",rules:b,label:"\u7c7b\u578b"},l.a.createElement(x.a,{placeholder:"\u7c7b\u578b"},l.a.createElement(x.a.Option,{value:"Web"},"Web"),l.a.createElement(x.a.Option,{value:"Node"},"Node"))),l.a.createElement(O.a.Item,{name:"name",rules:b,label:"\u540d\u79f0"},l.a.createElement(S.a,{maxLength:16,placeholder:"\u540d\u79f0"})),l.a.createElement(O.a.Item,{name:"key",rules:b,label:"\u6807\u8bc6"},l.a.createElement(S.a,{placeholder:"\u6807\u8bc6"})),l.a.createElement(O.a.Item,{name:"projectDir",rules:b,label:"\u9879\u76ee\u76ee\u5f55"},l.a.createElement(S.a,{placeholder:"\u9879\u76ee\u76ee\u5f55"})),l.a.createElement(O.a.Item,{name:"secret",rules:b,label:"\u79d8\u94a5"},l.a.createElement(S.a,{placeholder:"\u79d8\u94a5"})),l.a.createElement(O.a.Item,{name:"shellPath",rules:b,label:"shell\u8def\u5f84"},l.a.createElement(S.a,{placeholder:"shell\u8def\u5f84"})),l.a.createElement(O.a.Item,{name:"describe",label:"\u63cf\u8ff0"},l.a.createElement(S.a.TextArea,{placeholder:"\u63cf\u8ff0",rows:4}))))}),P=i.a.bind(E.a);t.default=function(){var e=Object(h.a)(),t=Object(c.useState)(null),a=Object(r.a)(t,2),o=a[0],i=a[1],g=Object(c.useState)(!1),E=Object(r.a)(g,2),O=E[0],v=E[1],S=Object(c.useState)({total:0,current:1,pageSize:10}),x=Object(r.a)(S,2),_=x[0],w=x[1],y=Object(c.useState)([]),k=Object(r.a)(y,2),C=k[0],M=k[1],z=Object(c.useState)(!1),F=Object(r.a)(z,2),N=F[0],T=F[1],V=[{title:"\u540d\u79f0",width:150,fixed:"left",dataIndex:"name"},{title:"\u6807\u8bc6",width:150,dataIndex:"key"},{title:"\u7c7b\u578b",width:150,dataIndex:"type",render:function(e){return l.a.createElement(s.a,{color:"blue"},e)}},{title:"\u9879\u76ee\u76ee\u5f55",dataIndex:"projectDir"},{title:"shell\u8def\u5f84",dataIndex:"shellPath"},{title:"\u79d8\u94a5",dataIndex:"secret"},{title:"\u63cf\u8ff0",dataIndex:"describe"},{title:"\u64cd\u4f5c",key:"action",fixed:"right",width:150,render:function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{onClick:function(){return function(e){i(e),v(!0)}(a)},href:"javascript:void (0);"},e.formatMessage({id:"update"})),l.a.createElement(u.a,{type:"vertical"}),l.a.createElement(d.a,{title:e.formatMessage({id:"deleteTips"}),onConfirm:function(){return function(e){j.c({id:e.id}).then((function(e){e.success&&L()}))}(a)}},l.a.createElement("a",{href:"javascript:void (0);"},e.formatMessage({id:"delete"}))))}}];function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object(n.a)({page:_.current,pageSize:_.pageSize},e),T(!0),j.b(e).then((function(e){var t=e.success,a=e.data;t&&(w({total:a.total,current:a.page,pageSize:a.pageSize}),M(a.rows)),T(!1)}))}return Object(c.useEffect)(L,[]),l.a.createElement("div",{className:P("page")},l.a.createElement(m.a,{align:"center",className:P("page__header")},l.a.createElement(p.a,{onClick:function(){i(null),v(!0)},type:"primary",icon:l.a.createElement(b.a,null)},e.formatMessage({id:"add"}))),l.a.createElement(f.a,{rowKey:"id",scroll:{x:"100vw"},loading:N,pagination:Object(n.a)(Object(n.a)({},_),{},{showTotal:function(e){return"\u5171 ".concat(e," \u6761")}}),onChange:function(e){L({page:e.current,pageSize:e.pageSize})},columns:V,defaultExpandAllRows:!0,dataSource:C}),l.a.createElement(I,{role:o,modalVisible:O,onSuccess:function(){return L()},onCancel:function(){return v(!1)}}))}}}]);
//# sourceMappingURL=projects.7ccf21f1.chunk.js.map