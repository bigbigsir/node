(this.webpackJsonpreact_admin=this.webpackJsonpreact_admin||[]).push([[8],{2338:function(e,r,t){e.exports={user:"user_user__19OoE",user__content:"user_user__content__1JwNP",user__title:"user_user__title__1WWu5",user__lang:"user_user__lang__KtXQb",header:"user_header__1sq_R",header__title:"user_header__title__3TSxz",header__logo:"user_header__logo__2i4Xy",header__subtitle:"user_header__subtitle__3cazf",footer:"user_footer__1nprT",footer__copyright:"user_footer__copyright__1A0F4",footer__links:"user_footer__links__13SVJ",footer__link:"user_footer__link__245Os",login__remember:"user_login__remember__2ZP98","login__link-register":"user_login__link-register__B6Jbj",login__captcha:"user_login__captcha__KEqzD","register__captcha-button":"user_register__captcha-button__3Z3Pr","register__popover-wrapper":"user_register__popover-wrapper__wqM1X","register__popover-placeholder":"user_register__popover-placeholder__3SQeD","register__popover-content":"user_register__popover-content__18QDj","register__progress-color":"user_register__progress-color__YXnpm",success:"user_success__2EKT4",exception:"user_exception__3rxVR",normal:"user_normal__3JjmY","register__password-tips":"user_register__password-tips__3CWqd"}},2342:function(e,r,t){"use strict";var a=t(0),s=t.n(a),n=t(2304);r.a=function(e){var r=e.labelId;return s.a.createElement(n.a,{id:"required",values:{label:s.a.createElement(n.a,{id:r})}})}},2343:function(e,r,t){"use strict";t.d(r,"c",(function(){return a})),t.d(r,"b",(function(){return s})),t.d(r,"a",(function(){return n}));var a=/^[0-9A-z]{6,16}$/,s=/^[\w-*/+.~!@#$%^&()]{6,20}$/,n=/^[A-z0-9]+([_.][A-z0-9]+)*@([A-z0-9-]+\.)+[A-z]{2,6}$/},2356:function(e,r,t){"use strict";t.r(r);var a=t(10),s=t(280),n=t(0),i=t.n(n),c=t(69),o=t(85),l=t(2279),_=t.n(l),u=t(2313),m=t(2314),g=t(277),d=t(2315),p=t(2305),h=t(143),f=t(68),E=t(41),b=t(2343),v=t(2303),j=t(2304),I=t(2342),w=t(173),O=t(282),M=t(2338),F=t.n(M),k=_.a.bind(F.a);r.default=function(){var e=Object(v.a)(),r=Object(o.e)(),t=Object(c.b)(),l=Object(n.useState)(!1),_=Object(s.a)(l,2),M=_[0],F=_[1],x=Object(n.useState)(!1),N=Object(s.a)(x,2),P=N[0],y=N[1],q=Object(n.useState)(0),S=Object(s.a)(q,2),T=S[0],z=S[1],C=Object(n.useState)(!1),V=Object(s.a)(C,2),A=V[0],J=V[1],R=Object(n.useState)(""),L=Object(s.a)(R,2),W=L[0],X=L[1],$=u.a.useForm(),D=Object(s.a)($,1)[0],K=[{required:!0,message:i.a.createElement(I.a,{labelId:"user.login.username"})},{pattern:b.c,message:i.a.createElement(j.a,{id:"user.register.usernameReg"})}],Q=[{required:!0,message:i.a.createElement(I.a,{labelId:"user.login.password"})},{validator:function(e,r){return F(!!r),X(r),r.length>=6&&b.b.test(r)?Promise.resolve():Promise.reject("")}}],Y=[{required:!0,message:i.a.createElement(I.a,{labelId:"user.register.confirm"})},{validator:function(e,r){return r&&D.getFieldValue("password")!==r?Promise.reject(i.a.createElement(j.a,{id:"user.register.confirmTips"})):Promise.resolve()}}],Z=[{required:!0,message:i.a.createElement(I.a,{labelId:"user.register.emailCode"})},{validator:function(e,r){return!r||D.getFieldValue("captchaId")?Promise.resolve():Promise.reject(i.a.createElement(j.a,{id:"user.register.firstGetCode"}))}}],B=[{required:!0,message:i.a.createElement(I.a,{labelId:"user.register.email"})},{pattern:b.a,message:i.a.createElement(j.a,{id:"user.register.emailReg"})}];return Object(n.useEffect)((function(){var e=null;T<=0?z(0):e=setTimeout((function(){return z(T-1)}),1e3);return function(){return clearTimeout(e)}}),[T]),i.a.createElement("div",{className:k("register")},i.a.createElement("h3",{className:k("user__title")},e.formatMessage({id:"user.register.register"})),i.a.createElement(u.a,{name:"login",form:D,size:"large",initialValues:{username:"",password:"",confirm:"",email:"",captcha:"",captchaId:""},onFinish:function(r){return(a=r).emailType="signIn",y(!0),void t(Object(w.e)(a)).then((function(r){var t=r.success;y(!1),t&&g.a.success(e.formatMessage({id:"user.register.success"}))}));var a},onFinishFailed:function(e){console.log("onFinishFailed:",e)}},i.a.createElement(u.a.Item,{name:"username",rules:K},i.a.createElement(d.a,{maxLength:16,placeholder:e.formatMessage({id:"user.login.username"})})),i.a.createElement("div",{className:k("register__popover-wrapper")},i.a.createElement(p.a,{placement:"right",visible:M,getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},content:function(){var r=W,t=r.length>10?"success":r.length>=6?"normal":"exception",a={success:e.formatMessage({id:"user.register.strength.strong"}),normal:e.formatMessage({id:"user.register.strength.medium"}),exception:e.formatMessage({id:"user.register.strength.short"})};return i.a.createElement("div",{className:k("register__popover-content")},i.a.createElement("p",{className:k("register__progress-color",t)},a[t]),i.a.createElement(m.a,{strokeWidth:6,percent:Math.floor(100*r.length/11),status:t,showInfo:!1}),i.a.createElement("p",{className:k("register__password-tips")},i.a.createElement(j.a,{id:"user.register.passwordReg"})))}},i.a.createElement("span",{className:k("register__popover-placeholder")})),i.a.createElement(u.a.Item,{name:"password",rules:Q},i.a.createElement(d.a.Password,{maxLength:20,placeholder:e.formatMessage({id:"user.login.password"})}))),i.a.createElement(u.a.Item,{name:"confirm",dependencies:["password"],rules:Y},i.a.createElement(d.a.Password,{visibilityToggle:!1,placeholder:e.formatMessage({id:"user.register.confirm"})})),i.a.createElement(u.a.Item,{name:"email",rules:B},i.a.createElement(d.a,{maxLength:30,placeholder:e.formatMessage({id:"user.register.email"})})),i.a.createElement(u.a.Item,null,i.a.createElement(h.a,{gutter:8},i.a.createElement(f.a,{span:16},i.a.createElement(u.a.Item,{name:"captchaId",noStyle:!0},i.a.createElement(d.a,{hidden:!0})),i.a.createElement(u.a.Item,{name:"captcha",dependencies:["captchaId"],rules:Z,noStyle:!0},i.a.createElement(d.a,{maxLength:4,placeholder:e.formatMessage({id:"user.register.emailCode"})}))),i.a.createElement(f.a,{span:8},i.a.createElement(E.a,{onClick:function(){D.validateFields(["email"]).then((function(e){J(!0),e=Object(a.a)(Object(a.a)({},e),{},{emailType:"signIn",username:D.getFieldValue("username")}),Object(O.getEmailCode)(e).then((function(e){var r=e.success,t=e.data;J(!1),r&&(z(60),D.setFieldsValue({captchaId:t.captchaId}),g.a.success("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u5230\u90ae\u7bb1\uff0c".concat(t.exp,"\u5206\u949f\u5185\u6709\u6548\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536")),D.getFieldValue("captcha")&&D.validateFields(["captcha"]).then((function(){return null})))}))}))},disabled:T>0,loading:A,className:k("register__captcha-button","monospaced-font")},T>0?T+" s":e.formatMessage({id:"user.register.getCode"}))))),i.a.createElement(u.a.Item,null,i.a.createElement(E.a,{loading:P,type:"primary",htmlType:"submit",block:!0},e.formatMessage({id:"user.register.register"})))),i.a.createElement("p",{className:k("login__link-register")},i.a.createElement("a",{onClick:function(){return r.push("/user/login")},href:"javascript:void (0);"},e.formatMessage({id:"user.register.login"}))))}}}]);
//# sourceMappingURL=register.09dfdf40.chunk.js.map