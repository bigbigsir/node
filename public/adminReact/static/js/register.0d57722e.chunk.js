(this.webpackJsonpreact_admin=this.webpackJsonpreact_admin||[]).push([[8],{69:function(e,r,t){e.exports={user:"user_user__19OoE",user__content:"user_user__content__1JwNP",user__title:"user_user__title__1WWu5",user__lang:"user_user__lang__KtXQb",header:"user_header__1sq_R",header__title:"user_header__title__3TSxz",header__logo:"user_header__logo__2i4Xy",header__subtitle:"user_header__subtitle__3cazf",footer:"user_footer__1nprT",footer__copyright:"user_footer__copyright__1A0F4",footer__links:"user_footer__links__13SVJ",footer__link:"user_footer__link__245Os",login__remember:"user_login__remember__2ZP98","login__link-register":"user_login__link-register__B6Jbj",login__captcha:"user_login__captcha__KEqzD","register__captcha-button":"user_register__captcha-button__3Z3Pr","register__popover-wrapper":"user_register__popover-wrapper__wqM1X","register__popover-placeholder":"user_register__popover-placeholder__3SQeD","register__popover-content":"user_register__popover-content__18QDj","register__progress-color":"user_register__progress-color__YXnpm",success:"user_success__2EKT4",exception:"user_exception__3rxVR",normal:"user_normal__3JjmY","register__password-tips":"user_register__password-tips__3CWqd"}},73:function(e,r,t){"use strict";var a=t(0),s=t.n(a),n=t(64);r.a=function(e){var r=e.labelId;return s.a.createElement(n.a,{id:"required",values:{label:s.a.createElement(n.a,{id:r})}})}},74:function(e,r,t){"use strict";t.d(r,"c",(function(){return a})),t.d(r,"b",(function(){return s})),t.d(r,"a",(function(){return n}));var a=/^[0-9A-z]{6,16}$/,s=/^[\w-*/+.~!@#$%^&()]{6,20}$/,n=/^[A-z0-9]+([_.][A-z0-9]+)*@([A-z0-9-]+\.)+[A-z]{2,6}$/},87:function(e,r,t){"use strict";t.r(r);var a=t(1),s=t(32),n=t(0),i=t.n(n),o=t(8),c=t(10),l=t(56),u=t.n(l),_=t(9),m=t(74),g=t(63),d=t(64),p=t(73),h=t(23),f=t(34),E=t(69),b=t.n(E),v=u.a.bind(b.a);r.default=function(){var e=Object(g.a)(),r=Object(c.useHistory)(),t=Object(o.b)(),l=Object(n.useState)(!1),u=Object(s.a)(l,2),E=u[0],b=u[1],I=Object(n.useState)(!1),j=Object(s.a)(I,2),F=j[0],w=j[1],O=Object(n.useState)(0),M=Object(s.a)(O,2),P=M[0],k=M[1],x=Object(n.useState)(!1),y=Object(s.a)(x,2),N=y[0],C=y[1],q=Object(n.useState)(""),S=Object(s.a)(q,2),T=S[0],z=S[1],V=_.Form.useForm(),A=Object(s.a)(V,1)[0],J=[{required:!0,message:i.a.createElement(p.a,{labelId:"user.login.username"})},{pattern:m.c,message:i.a.createElement(d.a,{id:"user.register.usernameReg"})}],R=[{required:!0,message:i.a.createElement(p.a,{labelId:"user.login.password"})},{validator:function(e,r){return b(!!r),z(r),r.length>=6&&m.b.test(r)?Promise.resolve():Promise.reject("")}}],L=[{required:!0,message:i.a.createElement(p.a,{labelId:"user.register.confirm"})},{validator:function(e,r){return r&&A.getFieldValue("password")!==r?Promise.reject(i.a.createElement(d.a,{id:"user.register.confirmTips"})):Promise.resolve()}}],W=[{required:!0,message:i.a.createElement(p.a,{labelId:"user.register.emailCode"})},{validator:function(e,r){return!r||A.getFieldValue("captchaId")?Promise.resolve():Promise.reject(i.a.createElement(d.a,{id:"user.register.firstGetCode"}))}}],X=[{required:!0,message:i.a.createElement(p.a,{labelId:"user.register.email"})},{pattern:m.a,message:i.a.createElement(d.a,{id:"user.register.emailReg"})}];return Object(n.useEffect)((function(){var e=null;P<=0?k(0):e=setTimeout((function(){return k(P-1)}),1e3);return function(){return clearTimeout(e)}}),[P]),i.a.createElement("div",{className:v("register")},i.a.createElement("h3",{className:v("user__title")},e.formatMessage({id:"user.register.register"})),i.a.createElement(_.Form,{name:"login",form:A,size:"large",initialValues:{username:"",password:"",confirm:"",email:"",captcha:"",captchaId:""},onFinish:function(r){return(a=r).emailType="signIn",w(!0),void t(Object(h.e)(a)).then((function(r){var t=r.success;w(!1),t&&_.message.success(e.formatMessage({id:"user.register.success"}))}));var a},onFinishFailed:function(e){console.log("onFinishFailed:",e)}},i.a.createElement(_.Form.Item,{name:"username",rules:J},i.a.createElement(_.Input,{maxLength:16,placeholder:e.formatMessage({id:"user.login.username"})})),i.a.createElement("div",{className:v("register__popover-wrapper")},i.a.createElement(_.Popover,{placement:"right",visible:E,getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},content:function(){var r=T,t=r.length>10?"success":r.length>=6?"normal":"exception",a={success:e.formatMessage({id:"user.register.strength.strong"}),normal:e.formatMessage({id:"user.register.strength.medium"}),exception:e.formatMessage({id:"user.register.strength.short"})};return i.a.createElement("div",{className:v("register__popover-content")},i.a.createElement("p",{className:v("register__progress-color",t)},a[t]),i.a.createElement(_.Progress,{strokeWidth:6,percent:Math.floor(100*r.length/11),status:t,showInfo:!1}),i.a.createElement("p",{className:v("register__password-tips")},i.a.createElement(d.a,{id:"user.register.passwordReg"})))}},i.a.createElement("span",{className:v("register__popover-placeholder")})),i.a.createElement(_.Form.Item,{name:"password",rules:R},i.a.createElement(_.Input.Password,{maxLength:20,placeholder:e.formatMessage({id:"user.login.password"})}))),i.a.createElement(_.Form.Item,{name:"confirm",dependencies:["password"],rules:L},i.a.createElement(_.Input.Password,{visibilityToggle:!1,placeholder:e.formatMessage({id:"user.register.confirm"})})),i.a.createElement(_.Form.Item,{name:"email",rules:X},i.a.createElement(_.Input,{maxLength:30,placeholder:e.formatMessage({id:"user.register.email"})})),i.a.createElement(_.Form.Item,null,i.a.createElement(_.Row,{gutter:8},i.a.createElement(_.Col,{span:16},i.a.createElement(_.Form.Item,{name:"captchaId",noStyle:!0},i.a.createElement(_.Input,{hidden:!0})),i.a.createElement(_.Form.Item,{name:"captcha",dependencies:["captchaId"],rules:W,noStyle:!0},i.a.createElement(_.Input,{maxLength:4,placeholder:e.formatMessage({id:"user.register.emailCode"})}))),i.a.createElement(_.Col,{span:8},i.a.createElement(_.Button,{onClick:function(){A.validateFields(["email"]).then((function(e){C(!0),e=Object(a.a)(Object(a.a)({},e),{},{emailType:"signIn",username:A.getFieldValue("username")}),Object(f.getEmailCode)(e).then((function(e){var r=e.success,t=e.data;C(!1),r&&(k(60),A.setFieldsValue({captchaId:t.captchaId}),_.message.success("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u5230\u90ae\u7bb1\uff0c".concat(t.exp,"\u5206\u949f\u5185\u6709\u6548\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536")),A.getFieldValue("captcha")&&A.validateFields(["captcha"]).then((function(){return null})))}))}))},disabled:P>0,loading:N,className:v("register__captcha-button","monospaced-font")},P>0?P+" s":e.formatMessage({id:"user.register.getCode"}))))),i.a.createElement(_.Form.Item,null,i.a.createElement(_.Button,{loading:F,type:"primary",htmlType:"submit",block:!0},e.formatMessage({id:"user.register.register"})))),i.a.createElement("p",{className:v("login__link-register")},i.a.createElement("a",{onClick:function(){return r.push("/user/login")},href:"javascript:void (0);"},e.formatMessage({id:"user.register.login"}))))}}}]);
//# sourceMappingURL=register.0d57722e.chunk.js.map