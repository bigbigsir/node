(this.webpackJsonpreact_admin=this.webpackJsonpreact_admin||[]).push([[3],{69:function(e,t,r){e.exports={user:"user_user__19OoE",user__content:"user_user__content__1JwNP",user__title:"user_user__title__1WWu5",user__lang:"user_user__lang__KtXQb",header:"user_header__1sq_R",header__title:"user_header__title__3TSxz",header__logo:"user_header__logo__2i4Xy",header__subtitle:"user_header__subtitle__3cazf",footer:"user_footer__1nprT",footer__copyright:"user_footer__copyright__1A0F4",footer__links:"user_footer__links__13SVJ",footer__link:"user_footer__link__245Os",login__remember:"user_login__remember__2ZP98","login__link-register":"user_login__link-register__B6Jbj",login__captcha:"user_login__captcha__KEqzD","register__captcha-button":"user_register__captcha-button__3Z3Pr","register__popover-wrapper":"user_register__popover-wrapper__wqM1X","register__popover-placeholder":"user_register__popover-placeholder__3SQeD","register__popover-content":"user_register__popover-content__18QDj","register__progress-color":"user_register__progress-color__YXnpm",success:"user_success__2EKT4",exception:"user_exception__3rxVR",normal:"user_normal__3JjmY","register__password-tips":"user_register__password-tips__3CWqd"}},73:function(e,t,r){"use strict";var a=r(0),s=r.n(a),n=r(64);t.a=function(e){var t=e.labelId;return s.a.createElement(n.a,{id:"required",values:{label:s.a.createElement(n.a,{id:t})}})}},74:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return n}));var a=/^[0-9A-z]{6,16}$/,s=/^[\w-*/+.~!@#$%^&()]{6,20}$/,n=/^[A-z0-9]+([_.][A-z0-9]+)*@([A-z0-9-]+\.)+[A-z]{2,6}$/},86:function(e,t,r){"use strict";r.r(t);var a=r(1),s=r(32),n=r(0),o=r.n(n),c=r(8),_=r(10),l=r(56),i=r.n(l),u=r(9),m=r(31),g=r(19),p=r(23),d=r(34),h=r(63),f=r(64),b=r(73),E=r(74),I=r(69),j=r.n(I),v=i.a.bind(j.a);t.default=function(){var e=Object(h.a)(),t=Object(_.useHistory)(),r=Object(c.b)(),l=localStorage.getItem("admin_username")||"",i=Object(n.useState)(!1),I=Object(s.a)(i,2),j=I[0],O=I[1],w=Object(n.useState)(!!sessionStorage.getItem("checkCaptcha")),k=Object(s.a)(w,2),S=k[0],y=k[1],F=Object(n.useState)(!!l),x=Object(s.a)(F,2),C=x[0],M=x[1],z=Object(n.useState)(""),q=Object(s.a)(z,2),N=q[0],A=q[1],P=Object(n.useState)(""),T=Object(s.a)(P,2),J=T[0],L=T[1],R=u.Form.useForm(),V=Object(s.a)(R,1)[0],X={username:l||"",password:"",captcha:"",captchaId:""},$=[{required:!0,message:o.a.createElement(b.a,{labelId:"user.login.username"})},{pattern:E.c,message:o.a.createElement(f.a,{id:"user.login.usernameReg"})}],D=[{required:!0,message:o.a.createElement(b.a,{labelId:"user.login.password"})},{pattern:E.b,message:o.a.createElement(f.a,{id:"user.login.passwordReg"})}],K=[{required:S,message:o.a.createElement(b.a,{labelId:"user.login.captcha"})}];function Q(s){s=Object(a.a)(Object(a.a)({},s),{},{password:Object(g.a)(s.password),_isShowErrorTips:!1}),O(!0),A(""),r(Object(p.b)(s)).then((function(r){var a=r.success,n=r.message;O(!1),a?(t.replace("/"),function(e,t){e?localStorage.setItem("admin_username",t):localStorage.removeItem("admin_username")}(C,s.username),sessionStorage.removeItem("checkCaptcha"),u.message.success(e.formatMessage({id:"user.login.success"}))):(W(),A(n),y(!0),sessionStorage.setItem("checkCaptcha","true"))}))}function W(){S&&Object(d.getCaptcha)({_isNeedLoading:!1}).then((function(e){var t=e.data;e.success&&(L(t.image),V.setFieldsValue({captchaId:t.captchaId}))}))}return Object(n.useEffect)(W,[S]),o.a.createElement("div",{className:v("login")},o.a.createElement("h3",{className:v("user__title")},e.formatMessage({id:"user.login.login"})),o.a.createElement(u.Form,{name:"login",size:"large",form:V,initialValues:X,onFinish:function(e){return Q(e)}},N&&o.a.createElement(u.Form.Item,{className:"Item"},o.a.createElement(u.Alert,{message:N,type:"error",showIcon:!0})),o.a.createElement(u.Form.Item,{name:"username",rules:$},o.a.createElement(u.Input,{maxLength:16,placeholder:e.formatMessage({id:"user.login.username"}),prefix:o.a.createElement(m.UserOutlined,null)})),o.a.createElement(u.Form.Item,{name:"password",rules:D},o.a.createElement(u.Input.Password,{maxLength:20,visibilityToggle:!1,onPressEnter:function(){return V.submit()},prefix:o.a.createElement(m.LockOutlined,null),placeholder:e.formatMessage({id:"user.login.password"})})),S&&o.a.createElement(u.Form.Item,null,o.a.createElement(u.Row,null,o.a.createElement(u.Col,{span:15},o.a.createElement(u.Form.Item,{name:"captcha",rules:K,noStyle:!0},o.a.createElement(u.Input,{maxLength:4,placeholder:e.formatMessage({id:"user.login.captcha"}),prefix:o.a.createElement(m.SafetyCertificateOutlined,null)}))),o.a.createElement(u.Col,{span:9},o.a.createElement("a",{onClick:W,dangerouslySetInnerHTML:{__html:J},className:v("login__captcha"),href:"javascript:void (0);"})))),o.a.createElement("div",{className:v("login__remember")},o.a.createElement(u.Checkbox,{checked:C,onChange:function(e){return M(e.target.checked)},name:"remember"},e.formatMessage({id:"user.login.remember"})),o.a.createElement("a",{style:{float:"right"},href:"javascript:void (0);"},e.formatMessage({id:"user.login.forgotPassword"}))),o.a.createElement(u.Form.Item,{name:"captchaId",noStyle:!0},o.a.createElement(u.Input,{onPressEnter:function(){return V.submit()},type:"hidden"})),o.a.createElement(u.Form.Item,null,o.a.createElement(u.Button,{loading:j,type:"primary",htmlType:"submit",block:!0},e.formatMessage({id:"user.login.login"})))),o.a.createElement("p",{className:v("login__link-register")},o.a.createElement("a",{onClick:function(){return t.push("/user/register")},href:"javascript:void (0);"},e.formatMessage({id:"user.login.register"}))))}}}]);
//# sourceMappingURL=login.9b65711e.chunk.js.map